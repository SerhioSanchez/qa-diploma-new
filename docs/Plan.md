# План автоматизации

### *Валидные исходные данные полей*
- *Номер карты*: 16 цифр
* *Срок действия карты*: **месяц** (число от 1 до 12, при совпадении поля "Год" с текущим годом, цифра не ниже текущего месяца) / **год** (последние цифры текущего или последующих трех лет)
+ *Владелец карты*: фамилия и имя держателя латинскими буквами через пробел, возможность дефиса
- *Код проверки подлинности CVV или CVC*: три цифры

## Перечень автоматизируемых сценариев
### *UI-тесты*
**Вид приобретения тура, нажатием кнопки "Купить"**

1. Заполнение полей валидными данными и карты со статусом APPROVED:
* Нажать на кнопку "Купить"
* В появившихся полях ввести номер карты: 4444 4444 4444 4441
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: форма отправилась успешно, всплывающее сообщение "Успешно. Операция одобрена Банком."

2. Заполнение полей валидными данными и карты со статусом DECLINED:
* Нажать на кнопку "Купить"
* В появившихся полях ввести номер карты: 4444 4444 4444 4442
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: форма отправилась успешно, всплывающее сообщение "Ошибка! Банк отказал в проведении операции."

3. Заполнение поля "Номер карты" картой со статусом APPROVED без пробелов, остальные поля валидными данными:
* Нажать на кнопку "Купить"
* В появившихся полях ввести номер карты: 4444444444444441
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: форма отправилась успешно, всплывающее сообщение об успешной оплате тура

4. Оставление поля "Номер карты" пустым, остальные поля валидными данными:
* Нажать на кнопку "Купить"
* В появившихся полях не вводить номер карты
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: под полем "Номер карты" появится предупреждение о незаполненном поле

5. Заполнение поля "Номер карты" рандомными цифрами в кол-ве 16:
* Нажать на кнопку "Купить"
* Ввести 16 любых чисел в поле номер карты
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: форма отправилась успешно, всплывающее сообщение об отказе в оплате тура

6. Заполнение поля "Номер карты" 15 рандомными цифрами:
* Нажать на кнопку "Купить"
* Ввести 15 цифр в поле номер карты
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: под полем "Номер карты" появится предупреждение о недопустимой длине поля

7. Заполнение поля "Номер карты" 19 рандомными цифрами:
* Нажать на кнопку "Купить"
* Ввести 19 рандомных чисел в поле номер карты
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: форма отправилась успешно, всплывающее сообщение об отказе в оплате тура

8. Заполнение поля "Номер карты" 20 рандомными цифрами:
* Нажать на кнопку "Купить"
* Ввести 20 цифр в поле номер карты
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
*Ожидаемый результат*: поле "Номер карты" не позволяет ввести такие данные

9. Заполнение поля "Номер карты" не цифрами, а другими символами:
* Нажать на кнопку "Купить"
* Ввести символы (не цифры) в поле номер карты
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: под полем "Номер карты" появится предупреждение о недопустимом значении

10. Оставление поля "Месяц" пустым, остальные поля валидными данными:
* Нажать на кнопку "Купить"
* Оставить поле "Месяц" пустым
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: под полем "Месяц" появится предупреждение о незаполненном поле

11. Заполнение поля "Месяц" одним символом (цифры от 1-9), остальные поля валидными данными:
* Нажать на кнопку "Купить"
* Заполнить поле "Месяц" цифрой от 1-9, одним символом
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
*Ожидаемый результат*: автозаполнение поле "Месяц" нулем перед цифрой

12. Заполнение поля "Месяц" более 2х цифр:
* Нажать на кнопку "Купить"
* Заполнить поле "Месяц" 3-я цифрами
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: под полем "Месяц" появится предупреждение о неверном формате

13. Заполнение поля "Месяц" значением 00:
* Нажать на кнопку "Купить"
* Заполнить поле "Месяц" 00
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: под полем "Месяц" появится сообщение "Неверно указан срок действия карты"

14. Заполнение поля "Месяц" значением 13:
* Нажать на кнопку "Купить"
* Заполнить поле "Месяц" значением 13
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: под полем "Месяц" появится сообщение "Неверно указан срок действия карты"

15. Заполнение поля "Месяц" не цифрами, а другими символами:
* Нажать на кнопку "Купить"
* Заполнить поле "Месяц" символами(не цифрами)
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: под полем "Месяц" появится сообщение о невалидном значении

16. Заполнение поля "Месяц" предыдущим месяцем, а поле "Год" текущим годом:
* Нажать на кнопку "Купить"
* Заполнить поле "Месяц" предыдущим месяцем
* Заполнить поле "Год" текущим годом
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: под полем "Месяц" появится предупреждение о невалидном значении

17. Оставление поля "Год" пустым, остальные поля валидными данными:
* Нажать на кнопку "Купить"
* Оставить поле "Год" пустым
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: под полем "Год" появится предупреждение о незаполненном поле

18. Заполнение поля "Год" одним символом (цифры от 1-9), остальные поля валидными данными:
* Нажать на кнопку "Купить"
* Заполнить поле "Год" цифрой от 1-9, одним символом
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: под полем "Год" появится предупреждение о невалидном значении

19. Заполнение поля "Год" предыдущим годом:
* Нажать на кнопку "Купить"
* Заполнить поле "Год" предыдущим годом
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: под полем "Год" появится предупреждение о неверном формате

20. Оставление поля "Владелец карты" пустым:
* Нажать на кнопку "Купить"
* Оставить поле "Владелец карты" пустым
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: под полем "Владелец карты" появится предупреждение о незаполненном поле

21. Заполнение поля "Владелец карты" валидными данными с дефисом:
* Нажать на кнопку "Купить"
* Заполнить поле "Владелец карты" латиницей с дефисом
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: форма отправилась успешно, всплывающее сообщение об успешной оплате тура

22. Заполнение поля "Владелец карты" валидными данными в нижнем регистре:
* Нажать на кнопку "Купить"
* Заполнить поле "Владелец карты" латиницей в нижнем регистре
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: автозаполнение в верхнем регистре поля "Владелец карты"

23. Заполнение поле "Владелец карты" с пробелами в начале и в конце:
* Нажать на кнопку "Купить"
* Заполнить поле "Владелец карты" с пробелом перед именем и фамилией на латинице и в конце
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: автозаполнение поля "Владелец карты" без пробелов в начале и в конце

24. Заполнение поле "Владелец карты" иностранным языком(не латиницей):
* Нажать на кнопку "Купить"
* Заполнить поле "Владелец карты" иностранным языком
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: под полем "Владелец карты" появится предупреждение о невалидном значении

25. Заполнение поле "Владелец карты" цифрами:
* Нажать на кнопку "Купить"
* Заполнить поле "Владелец карты" цифрами
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: под полем "Владелец карты" появится предупреждение о невалидном значении

26. Заполнение поле "Владелец карты" иероглифами:
* Нажать на кнопку "Купить"
* Заполнить поле "Владелец карты" иероглифами
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: под полем "Владелец карты" появится предупреждение о невалидном значении

27. Оставление поле "CVC/CVV" пустым:
* Нажать на кнопку "Купить"
* Оставить поле "CVC/CVV" пустым
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: под полем "CVC/CVV" появится предупреждение о незаполненном поле

28. Заполнение поле "CVC/CVV" двумя рандомными цифрами:
* Нажать на кнопку "Купить"
* Ввести в поле "CVC/CVV" две рандомные цифры
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: под полем "CVC/CVV" появится предупреждение о недопустимой длине поля

29. Заполнение поле "CVC/CVV" 4 рандомными цифрами:
* Нажать на кнопку "Купить"
* Ввести в поле "CVC/CVV" четыре цифры
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: поле "CVC/CVV" заполняется первыми тремя введенными цифрами

30. Заполнение поле "CVC/CVV" 3 буквами:
* Нажать на кнопку "Купить"
* Ввести в поле "CVC/CVV" 3 буквы
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: под поле "CVC/CVV" появится предупреждение о невалидном значении

31. Заполнение поле "CVC/CVV" символами, знаками препинания:
* Нажать на кнопку "Купить"
* Ввести в поле "CVC/CVV" 3 символа или знака препинания
* Ввести валидные данные в остальные поля
* Нажать на кнопку "Продолжить"
  
*Ожидаемый результат*: под поле "CVC/CVV" появится предупреждение о невалидном значении

Вид приобретения тура, нажатием кнопки "Купить в кредит"

Заполнение полей валидными данными и карты со статусом APPROVED
Нажать на кнопку "Купить в кредит"
В появившихся полях ввести номер карты: 4444 4444 4444 4441
Ввести валидные данные в остальные поля
Нажать на кнопку "Продолжить"
*Ожидаемый результат*: форма отправилась успешно, всплывающее сообщение "Успешно. Операция одобрена Банком."

Заполнение полей валидными данными и карты со статусом DECLINED
Нажать на кнопку "Купить в кредит"
В появившихся полях ввести номер карты: 4444 4444 4444 4442
Ввести валидные данные в остальные поля
Нажать на кнопку "Продолжить"
*Ожидаемый результат*т: форма отправилась успешно, всплывающее сообщение "Ошибка! Банк отказал в проведении операции."

**Далее сценарии с пункта 3-31 по функционалу "Купить", провести по функционалу "Купить в кредит"**

*Примечание*: Для перехода по ссылке на страницу покупки тура должен быть запущен SUT и в браузере открыта страница тура http://localhost:8080

### *API-тестирование*
**1.** Отправка POST запроса платежа с валидными данными и карты со статусом "APPROVED" на URL-адрес http://localhost:8080/api/v1/pay 
   
*Ожидаемый результат*: ответ сервера: код 200

**2.** Отправка POST запроса на кредит с валидными данными и карты со статусом "DECLINED" на URL-адрес http://localhost:8080/api/v1/pay

*Ожидаемый результат*: ответ сервера: код 200

**3.** Отправка POST запроса платежа с валидными данными и карты со статусом "APPROVED" на URL-адрес http://localhost:8080/api/v1/credit

*Ожидаемый результат*: ответ сервера: код 200

**4.** Отправка POST запроса на кредит с валидными данными и карты со статусом "DECLINED" на URL-адрес http://localhost:8080/api/v1/credit

*Ожидаемый результат*: ответ сервера: код 200

## Перечень используемых инструментов с обоснованием выбора

* **IntelliJ IDEA** - инструмент для написания автотестов на java, создание проектов Maven, Gradle.
* **JDK 11**, т.к. добавлены новые фичи и возможности, новые полезные методы в API.
* **Git и Github** - система контроля версий, для хранения кодов автотестов и настроек окружения.
* **Gradle**, скрипты сборки на порядок короче XML, используемые Maven. Максимально быстро собирает проект, самостоятельно устанавливает зависимости.
* **Selenide** - удобный фреймворк для написания автотестов (удобней чем selenium).
* **JUnit** - это фреймворк для языка программирования Java, предназначенный для автоматического тестирования программ. Удобная проверка отдельной функциональности каждого компонента (unit-тестирование).
* **Lombok** - фреймворк для автогенерации кода с целью улучшить читаемость тестов.
* **Java Faker**, простой инструмент для генерации тестовых данных.
* **JSON** - формат данных, предназначенный для передачи информации. Именно для организации обмена данными (между клиентом и сервером).
* **Allure** - помощник в составлении отчетов тестирования.
* **Gson** - фреймворк для генерации body запросов при API тестирования.

## Перечень и описание возможных рисков при автоматизации

* Создание дополнительной трудности с настройкой SUT, из-за требования совместимости с двумя БД (MySQL, PostgreSQL).
* Риски связанные с правильной идентификацией полей ввода данных.
* Возможность приложения пропускать через себя данные карт, если у него нет PCI DSS, может сказаться на автоматизации, и пропуске бага.
* Изменения в дизайне, не должно влиять на тестируемый функционал.
* Ложные срабатывания.

## Интервальная оценка с учётом рисков в часах

* Разработка тест-плана: **12 часов**.
* Настройка SUT: **12 часов**.
* Написание автотестов: **24 часа**.
* Создание баг-репортов: **10 часов**.
* Написание отчета по результатам прогона тестов: **6 часов**.
* Анализ выполненной работы: **2 часа**.

## План сдачи работ: когда будут готовы автотесты, результаты их прогона

**1.** Автотесты подготовить к **14.03.2024**

**2.** Оформление баг-репортов к **22.03.2024**

**3.** Отчет по результатам автоматизации к **26.03.2024**
